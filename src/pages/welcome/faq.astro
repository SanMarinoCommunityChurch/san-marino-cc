---
import SidebarLinks from "../../components/SidebarLinks.astro";
import Accordion from "../../components/Svelte/Accordion.svelte";
import { getCurrentPage } from "../../lib/pages";
import { getSanityData } from "../../lib/sanity";
import { faq } from "../../lib/sanityQueries";
import { PortableText } from "astro-portabletext";

import placeholderImg from "../../assets/images/worship-2.jpg";
import bgImage from "../../assets/images/plaza-lights.jpg";
import SectionPage from "../../layouts/SectionPage.astro";

import image1 from "../../assets/images/choir.jpg";
import image2 from "../../assets/images/people-2.jpg";
import image3 from "../../assets/images/contemporary.jpg";

const currentPage = getCurrentPage("4dab6669-f0b2-45f3-808a-739750fc16b4");

const items = [
  {
    name: "Worship with Us",
    description: "Join us for our traditional or contemporary Sunday service.",
    href: "/worship/live",
    image: image1,
  },
  {
    name: "Find an Event",
    description:
      "Find upcoming events and programs at San Marino Community Church.",
    href: "/connect/events",
    image: image2,
  },
  {
    name: "Join a Ministry",
    description: "Learn how to get involved in one of our many ministries.",
    href: "/connect/ministries",
    image: image3,
  },
];

const faqs = await getSanityData(faq);
---

<SectionPage currentPage={"4dab6669-f0b2-45f3-808a-739750fc16b4"}>
  <!-- <Fragment slot="pageHead">
  </Fragment> -->
  <div class="with-sidebar">
    <div class="faq flow">
      {
        faqs.items.map((item) => (
          <Accordion client:load>
            <Fragment slot="question">{item.question}</Fragment>
            <div class="text flow" slot="answer">
              <PortableText value={item.answer} />
            </div>
          </Accordion>
        ))
      }
      <Accordion client:load>
        <Fragment slot="question">What are your service options?</Fragment>
        <Fragment slot="answer">
          <p>
            We offer <a href="/">three different Sunday worship experiences</a>.
            The first two are live-streamed online and archived to assist you in
            worshipping whenever is most convenient for you.
          </p>
        </Fragment>
      </Accordion>
      <Accordion client:load />
    </div>
    <SidebarLinks items={items} />
  </div>
</SectionPage>

<style>
  .faq.flow {
    gap: 2rem;
  }

  .text ul {
    list-style: disc;
    padding-left: 2rem;
  }

  .text ul > * + * {
    margin-top: 1rem;
  }

  .text a {
    color: var(--color-primary-800);
  }
</style>
