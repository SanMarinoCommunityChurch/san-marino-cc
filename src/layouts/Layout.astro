---
import { getSanityData } from "../lib/sanity";

import SiteHeader from "../components/SiteHeader.astro";
import SiteFooter from "../components/SiteFooter.astro";
// import SiteFooter from "../components/SiteFooter.astro";
import "../styles/global.css";

import welcomeImg from "../assets/images/people.jpg";
import worshipImg from "../assets/images/choir.jpg";
import connectImg from "../assets/images/contemporary.jpg";
import aboutImg from "../assets/images/church-garden.jpg";
import resourcesImg from "../assets/images/church-ext-5.jpg";

const mainNavigation = [
  {
    name: "I’m New",
    href: "welcome/im-new",
  },
  {
    name: "Worship Live",
    href: "worship/live",
    button: true,
  },
  {
    name: "FAQ",
    href: "welcome/faq",
  },
];

const fullNavigation = [
  {
    name: "Welcome",
    slug: "welcome",
    img: welcomeImg,
    children: [
      {
        name: "I’m New",
        slug: "im-new",
      },
      {
        name: "Weekly Schedule",
        slug: "weekly-schedule",
      },
      {
        name: "FAQ",
        slug: "faq",
      },
      {
        name: "How to Join",
        slug: "how-to-join",
      },
    ],
  },
  {
    name: "Worship",
    slug: "worship",
    img: worshipImg,
    children: [
      {
        name: "Worship Live",
        slug: "live",
      },
      {
        name: "Worship Services",
        slug: "services",
      },
    ],
  },
  {
    name: "Connect",
    slug: "connect",
    img: connectImg,
    children: [
      {
        name: "Events & Programs",
        slug: "events",
      },
      {
        name: "Ministries",
        slug: "ministries",
      },
      {
        name: "Missions",
        slug: "missions",
      },
      {
        name: "Pastoral Residency",
        slug: "pastoral-residency",
      },
    ],
  },
  {
    name: "Who We Are",
    slug: "who-we-are",
    img: aboutImg,
    children: [
      {
        name: "Mission & Beliefs",
        slug: "mission-and-beliefs",
      },
      {
        name: "Our History",
        slug: "our-history",
      },
      {
        name: "Church Leadership",
        slug: "church-leadership",
      },
    ],
  },
  {
    name: "Resources",
    slug: "resources",
    img: resourcesImg,
    children: [
      {
        name: "Blog",
        slug: "blog",
      },
      {
        name: "Education",
        slug: "blog",
      },
    ],
  },
  {
    name: "Utility",
    slug: "",
    children: [
      {
        name: "Give",
        slug: "give",
        button: true,
        description:
          "Make a donation to the Foundaiton of San Marino Community Church.",
      },
      {
        name: "Contact",
        slug: "contact",
        description: "Contact us for location, hours, and other questions.",
      },
      {
        name: "Calendar",
        slug: "calendar",
        description: "See the current events and programs at SMCC.",
      },
      {
        name: "Nursery School",
        slug: "nursery-school",
        external: true,
        description:
          "Our Nursery School provides a place of joy and nurturing for our young children.",
      },
    ],
  },
];

const { title } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <link rel="stylesheet" href="https://use.typekit.net/wsf6agj.css" />
    <slot name="pageHead" />
  </head>
  <body>
    <SiteHeader
      mainNavigation={mainNavigation}
      fullNavigation={fullNavigation}
    />
    <slot name="main" />
    <SiteFooter fullNavigation={fullNavigation} />
  </body>
</html>

<style is:global>
  .content-wrapper {
    position: relative;
    max-width: clamp(16rem, var(--wrapper-max-width, 100vw), 80rem);
    padding-inline: var(--gutter);
    margin-inline: auto;
  }

  .with-sidebar {
    --sidebar-gap: 3rem;
    --sidebar-min-width: 25rem;
    --main-min-width: 50%;
    display: flex;
    flex-wrap: wrap;
    gap: var(--sidebar-gap);
  }

  .with-sidebar > :last-child {
    flex-basis: var(--sidebar-min-width);
    flex-grow: 1;
  }

  .with-sidebar > :first-child {
    flex-basis: 0;
    flex-grow: 999;
    min-inline-size: var(--main-min-width);
  }

  .flow {
    --flow-space: 1rem;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
  }

  .flow > * {
    margin-block: 0;
  }

  .flow > * + * {
    margin-block-start: var(--flow-space);
  }

  .flex {
    display: flex;
  }

  .cluster {
    --cluster-space: 1rem;
    --justify: flex-start;
    --align: center;
    display: flex;
    flex-wrap: wrap;
    gap: var(--cluster-space);
    justify-content: var(--justify);
    align-items: var(--align);
  }

  .responsive-grid {
    --gap: 1rem;
    --item-min-width: 30rem;
    --item-max-width: 1fr;
    display: grid;
    grid-gap: var(--gap);
    grid-template-columns: repeat(
      auto-fit,
      minmax(min(var(--item-min-width), 100%), var(--item-max-width))
    );
  }

  .frame {
    --width: 4;
    --height: 3;
    aspect-ratio: var(--width) / var(--height);
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .frame.video {
    --width: 16;
    --height: 9;
  }

  .frame.square {
    --width: 1;
    --height: 1;
  }

  .frame.avatar {
    --width: 1;
    --height: 1;
    width: 5rem;
    height: 5rem;
    border-radius: 9999px;
  }

  .frame > img,
  .frame > video {
    inline-size: 100%;
    block-size: 100%;
    object-fit: cover;
  }

  .center-items {
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
  }

  .small-title {
    font-family: var(--font-secondary);
    font-weight: var(--font-weight-semi);
    font-size: var(--step--1);
    letter-spacing: 1.5pt;
    text-transform: uppercase;
  }

  .paragraphs.flow {
    --flow-space: 1.5rem;
  }

  :where(a, button):not(.btn, .logo, .link) {
    text-decoration: underline;
  }

  :where(a, button):not(.btn, .logo):hover {
    text-decoration: none;
  }

  .events-pagination .splide__pagination__page.is-active {
    background: var(--color-primary-300) !important;
  }
</style>
